<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
    <title>User Registration Form</title>
</head>

<body>
    <div class="container" ng-app="myApp">

        <div class="container">

            <h1 class="text-dark text-center mb-3">User Registration Form</h1>

        </div>

        <div class="container mt-4" ng-controller="RegisterController">

            <div align="right">
                <a href="#" ng-click="searchUser()">{{title}}</a>
            </div>

            <form name="myForm" role="form" class="well" ng-hide="ifSearchUser" ng-submit="MyForm.$valid" novalidate>

                <div class="mb-3">
                    <label for="name" class="form-label">Name</label>
                    <input type="text" class="form-control" id="name" name="name" placeholder="Enter Name"
                        ng-model="newuser.name" ng-required="true">
                    <span ng-show="myForm.name.$touched && myForm.name.$invalid" class="req">
                        This is the required field.
                    </span>
                </div>

                <div class="mb-3">
                    <label for="name" class="form-label">User Name</label>
                    <input type="text" class="form-control" id="username" name="username" placeholder="Enter User Name"
                        ng-model="newuser.username" ng-required="true">
                    <span ng-show="myForm.username.$touched && myForm.username.$invalid" class="req">
                        This is the required field.
                    </span>
                </div>

                <div class="mb-3">
                    <label for="email" class="form-label">Email address</label>
                    <input type="email" id="email" name="email" class="form-control" placeholder="Enter Email "
                        ng-model="newuser.email" ng-required="true" ng-pattern="/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/">
                    <span ng-show="myForm.email.$touched && myForm.email.$invalid && myForm.email.$error.pattern" class="req">
                        Invalid Email Format
                    </span>
                </div>

                <div class="mb-3">
                    <label for="dept" class="form-label">Department</label>
                    <select class="form-select" id="dept" name="dept" ng-model="newuser.dept" ng-required="true">
                        <option selected>Select Department</option>
                        <option value="IT">IT</option>
                        <option value="CE">CE</option>
                        <option value="EXTC">EXTC</option>
                        <option value="ME">ME</option>
                    </select>
                    <span ng-show="myForm.dept.$touched && myForm.dept.$invalid" class="req">
                        This field requires proper format.
                    </span>
                </div>

                <div class="mb-3">
                    <label for="gender" class="form-label">Gender</label>
                    <select class="form-select" id="gender" name="gender" ng-model="newuser.gender" ng-required="true">
                        <option selected>Select Gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                    <span ng-show="myForm.gender.$touched && myForm.gender.$invalid" class="req">
                        This field requires proper format.
                    </span>
                </div>


                <div class="mb-3">
                    <label for="password" class="form-label">Password</label>
                    <input type="password" id="password" class="form-control" placeholder="Enter Password "
                    ng-model="newuser.password" ng-required="true">
                    <span ng-show="myForm.password.$touched && myForm.password.$invalid" class="req">
                        This field requires proper format.
                    </span>
                </div>

                <div class="mb-3">
                    <label for="phone" class="form-label">Phone</label>
                    <input type="number" id="phone" class="form-control" placeholder="Enter Phone "
                    ng-model="newuser.phone" ng-required="true" ng-pattern="/^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]\d{3}[\s.-]\d{4}$/">
                    <span ng-show="myForm.phone.$touched && myForm.phone.$invalid && myForm.phone.$error.pattern" class="req">
                        Invalid phone number format
                    </span>
                </div>
                <br>
                <input type="hidden" ng-model="newuser.id">
                <input type="button" class="btn btn-primary" ng-click="saveUser()" class="btn btn-primary"
                    ng-disabled="MyForm.$invalid" value="Submit">

            </form>

            <div class="container mt-4">
                <h4><b>Registered Users</b></h4>
                <table ng-if="users.length" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr class="info">
                            <th>Name</th>
                            <th>User Name</th>
                            <th>Email</th>
                            <th>Department</th>
                            <th>Phone</th>
                            <th>Gender</th>
                            <th ng-if="!ifSearchUser">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="user in users">
                            <td>{{ user.name }}</td>
                            <td>{{ user.username }}</td>
                            <td>{{ user.email }}</td>
                            <td>{{ user.dept }}</td>
                            <td>{{ user.phone }}</td>
                            <td>{{ user.gender }}</td>
                            <td ng-if="!ifSearchUser">
                                <a href="#" ng-click="edit(user.id)" role="button" class="btn btn-info">edit</a> &nbsp;
                                <a href="#" ng-click="delete(user.id)" role="button" class="btn btn-danger">delete</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div ng-hide="users.length > 0">No Users Found</div>
            </div>

        </div>
    </div>
    <script src="main.js"></script>
</body>

</html>